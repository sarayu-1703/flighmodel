<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Flight - SmartWings</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-plane"></i>
                <span>SmartWings</span>
            </div>
            <ul class="nav-menu">
                <li><a href="../../index.html" class="nav-link">Home</a></li>
                <li><a href="#" class="nav-link">My Bookings</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
                <li><a href="login.html" class="nav-link login-btn">Login</a></li>
            </ul>
        </div>
    </nav>

    <div class="booking-container">
        <div class="booking-header">
            <h1>Book Your Flight</h1>
            <p>Find and book the perfect flight for your journey</p>
        </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Search</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Select</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Passenger Info</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Payment</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Confirmation</div>
            </div>
        </div>

        <!-- Step 1: Flight Search -->
        <div id="step1" class="booking-step active">
            <div class="search-form">
                <h2>Search Flights</h2>
                <form id="flightSearchForm" onsubmit="searchFlights(event)">
                    <div class="trip-type">
                        <label><input type="radio" name="tripType" value="roundtrip" checked> Round Trip</label>
                        <label><input type="radio" name="tripType" value="oneway"> One Way</label>
                        <label><input type="radio" name="tripType" value="multicity"> Multi-City</label>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fromCity">From</label>
                            <select id="fromCity" name="from" required>
                                <option value="">Select Origin</option>
                                <option value="NYC">New York (NYC)</option>
                                <option value="LAX">Los Angeles (LAX)</option>
                                <option value="CHI">Chicago (CHI)</option>
                                <option value="MIA">Miami (MIA)</option>
                                <option value="SEA">Seattle (SEA)</option>
                                <option value="SFO">San Francisco (SFO)</option>
                                <option value="BOS">Boston (BOS)</option>
                                <option value="ATL">Atlanta (ATL)</option>
                            </select>
                        </div>
                        <div class="swap-cities">
                            <button type="button" onclick="swapCities()">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="toCity">To</label>
                            <select id="toCity" name="to" required>
                                <option value="">Select Destination</option>
                                <option value="NYC">New York (NYC)</option>
                                <option value="LAX">Los Angeles (LAX)</option>
                                <option value="CHI">Chicago (CHI)</option>
                                <option value="MIA">Miami (MIA)</option>
                                <option value="SEA">Seattle (SEA)</option>
                                <option value="SFO">San Francisco (SFO)</option>
                                <option value="BOS">Boston (BOS)</option>
                                <option value="ATL">Atlanta (ATL)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="departDate">Departure</label>
                            <input type="date" id="departDate" name="departure" required>
                        </div>
                        <div class="form-group" id="returnDateGroup">
                            <label for="returnDate">Return</label>
                            <input type="date" id="returnDate" name="return">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="passengers">Passengers</label>
                            <div class="passenger-selector">
                                <div class="passenger-type">
                                    <span>Adults (12+)</span>
                                    <div class="counter">
                                        <button type="button" onclick="updateCounter('adults', -1)">-</button>
                                        <span id="adultsCount">1</span>
                                        <button type="button" onclick="updateCounter('adults', 1)">+</button>
                                    </div>
                                </div>
                                <div class="passenger-type">
                                    <span>Children (2-11)</span>
                                    <div class="counter">
                                        <button type="button" onclick="updateCounter('children', -1)">-</button>
                                        <span id="childrenCount">0</span>
                                        <button type="button" onclick="updateCounter('children', 1)">+</button>
                                    </div>
                                </div>
                                <div class="passenger-type">
                                    <span>Infants (0-2)</span>
                                    <div class="counter">
                                        <button type="button" onclick="updateCounter('infants', -1)">-</button>
                                        <span id="infantsCount">0</span>
                                        <button type="button" onclick="updateCounter('infants', 1)">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="travelClass">Class</label>
                            <select id="travelClass" name="class" required>
                                <option value="economy">Economy</option>
                                <option value="premium-economy">Premium Economy</option>
                                <option value="business">Business</option>
                                <option value="first">First Class</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-large">
                        <i class="fas fa-search"></i> Search Flights
                    </button>
                </form>
            </div>
        </div>

        <!-- Step 2: Flight Selection -->
        <div id="step2" class="booking-step">
            <h2>Available Flights</h2>
            <div id="flightResults" class="flight-results">
                <!-- Flight results will be populated by JavaScript -->
            </div>
        </div>

        <!-- Step 3: Passenger Information -->
        <div id="step3" class="booking-step">
            <h2>Passenger Information</h2>
            <div id="passengerForms" class="passenger-forms">
                <!-- Passenger forms will be generated by JavaScript -->
            </div>
            <button class="btn btn-primary" onclick="nextStep()">Continue to Payment</button>
        </div>

        <!-- Step 4: Payment -->
        <div id="step4" class="booking-step">
            <div class="payment-container">
                <div class="booking-summary">
                    <h3>Booking Summary</h3>
                    <div id="bookingSummary" class="summary-content">
                        <!-- Booking summary will be populated -->
                    </div>
                </div>
                
                <div class="payment-form">
                    <h3>Payment Information</h3>
                    <div class="payment-methods">
                        <label class="payment-method">
                            <input type="radio" name="paymentMethod" value="card" checked>
                            <i class="fas fa-credit-card"></i>
                            Credit/Debit Card
                        </label>
                        <label class="payment-method">
                            <input type="radio" name="paymentMethod" value="paypal">
                            <i class="fab fa-paypal"></i>
                            PayPal
                        </label>
                        <label class="payment-method">
                            <input type="radio" name="paymentMethod" value="apple">
                            <i class="fab fa-apple-pay"></i>
                            Apple Pay
                        </label>
                    </div>
                    
                    <div id="cardPayment" class="payment-details">
                        <form id="paymentForm" onsubmit="processPayment(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cardNumber">Card Number</label>
                                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expiryDate">Expiry Date</label>
                                    <input type="text" id="expiryDate" placeholder="MM/YY" required>
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV</label>
                                    <input type="text" id="cvv" placeholder="123" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cardName">Name on Card</label>
                                    <input type="text" id="cardName" placeholder="John Doe" required>
                                </div>
                            </div>
                            
                            <div class="billing-address">
                                <h4>Billing Address</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="address">Address</label>
                                        <input type="text" id="address" placeholder="123 Main St" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="city">City</label>
                                        <input type="text" id="city" placeholder="New York" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="state">State</label>
                                        <input type="text" id="state" placeholder="NY" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="zip">ZIP Code</label>
                                        <input type="text" id="zip" placeholder="10001" required>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-lock"></i> Complete Payment
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5: Confirmation -->
        <div id="step5" class="booking-step">
            <div class="confirmation-content">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>Booking Confirmed!</h2>
                <p>Your flight has been successfully booked. A confirmation email has been sent to your email address.</p>
                
                <div class="booking-details" id="confirmationDetails">
                    <!-- Confirmation details will be populated -->
                </div>
                
                <div class="qr-code-section">
                    <h3>E-Ticket QR Code</h3>
                    <div id="qrCode" class="qr-code">
                        <!-- QR code will be generated here -->
                    </div>
                    <p>Show this QR code at the airport for check-in</p>
                </div>
                
                <div class="confirmation-actions">
                    <button class="btn btn-primary" onclick="downloadTicket()">
                        <i class="fas fa-download"></i> Download E-Ticket
                    </button>
                    <button class="btn btn-secondary" onclick="emailTicket()">
                        <i class="fas fa-envelope"></i> Email Ticket
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/booking.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</body>
</html>